<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Project Page - Massively by HTML5 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/assets/css/main.css" />
		<noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
		<style>
			span.image.right {
				float: right; /* Aligns the image to the right */
				margin-left: 1em; /* Adds spacing between the image and text */
				margin-bottom: 1em; /* Adds space below the image */
				max-width: 40%; /* Limits the image width to prevent it from dominating */
			}

			ul {
				clear: both; /* Ensures the list clears the floated image */
				margin-top: 1em; /* Adds spacing above the list */
			}
			.block-diagram {
				display: block;
				margin: 1em auto; /* Centers the image horizontally */
			}
			.left-aligned-image {
				display: block; /* Ensures it behaves as a block element */
				margin-top: 1em; /* Adds space above the image */
				max-width: 100%; /* Ensures the image does not exceed the width of its container */
				height: auto;    /* Maintains the aspect ratio of the image */
				display: block;  /* Removes unwanted inline spacing around the image */
			}
		</style>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">An Nguyen</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="/index.html">Projects</a></li>
							<li class="active"><a href="color-composer.html">Color Composer</a></li>
							<li><a href="/about.html">About Me</a></li>
							<li><a href="/resume.html">Resume</a></li>
						</ul>
						<ul class="icons">
							<li>
								<a href="mailto:annguyen2025@u.northwestern.edu" class="icon solid fa-envelope">
									<span class="label">Email</span>
								</a>
							</li>
							<li>
								<a href="https://www.linkedin.com/in/an-n-b2947b195/" class="icon brands fa-linkedin" target="_blank" rel="noopener noreferrer">
									<span class="label">LinkedIn</span>
								</a>
							</li>
							<li>
								<a href="https://github.com/annguyen9461" class="icon brands fa-github" target="_blank" rel="noopener noreferrer">
									<span class="label">GitHub</span>
								</a>
							</li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<span class="date">December 14, 2024</span>
									<h1>Color Composer</h1>
								</header>
								<div class="image main"><img src="images/music-robot.gif" alt="robot driving over colors and playing music" /></div>
								<h2>Overview</h2>
                                <p>A differential drive robot is wirelessly controlled via a joystick and two Micro:Bits powered by the nRF52833 microcontrollers. As the robot drives over colors on the ground, it plays music notes that are associated with different colors.
                                </p>
								<p><u>Team Members</u>:   Talia Ben-Naim,    Natalie Hill,    An Nguyen<br>
                                <u>Github</u>: coming soon! <br>
                                <u><a href="https://www.mccormick.northwestern.edu/computer-science/news-events/news/articles/2024/microcontroller-system-design-students-demo-final-projects.html
                                    " target="_blank" style="text-decoration: none; color: inherit;">Featured Article</a></u>
                                </p>
								<h2>Components</h2>
								<div class="equipment-list">
									<span class="image right">
										<img src="images/color-composer-components.png" alt="poolinator equipment list" />
									</span>
                                        <li><a href="https://www.sparkfun.com/products/17287?gQT=2" target="_blank">micro:bit V2 Board (nRF52833) (x2)</a></li>
                                        <li><a href="https://www.sparkfun.com/products/16275" target="_blank">SparkFun micro:bot kit for micro:bit - v2.0</a></li>
                                        <li><a href="https://www.adafruit.com/product/3779" target="_blank">Adafruit AS7262 6-Channel Visible Light / Color Sensor Breakout</a></li>
                                        <li><a href="https://www.sparkfun.com/products/15168" target="_blank">SparkFun Qwiic Joystick</a></li>
                                        <li><a href="https://www.adafruit.com/product/1313" target="_blank">Speaker</a></li>
								</div>
								<br>
								<br>
								<br>
								<br>
								<br>
								<br>								
                                <br>
								<h2>Approach</h2>
								<ul>
									<li>Inputs:
                                        <ul>
                                            <li>Signal from the joystick</li>
                                            <li>Color on the ground</li>
                                        </ul>
                                    </li>
									<li>Outputs:
                                        <ul>
                                            <li>Driving direction</li>
                                            <li>Music note</li>
                                        </ul>
                                    </li>
								</ul>
								<img src="images/color-composer-diagram.png" alt="Block Diagram of Interactions for Color Composer" class="left-aligned-image">
								<header>
									<p>Block Diagram of the Interactions Between Subsystems
									</p>
								</header>
                                <p>Project flow
                                </p>
                                <ul>
                                    <li>User controls the joystick. The x and y directions gets encoded in radio packets along with a password (“color composer”) for microbit1 (transmitter)
                                    </li>
                                    <li>Microbit2 (receiver) decodes the radio packets and decides the driving direction based on x and y to move the robot<br>
                                        (forward, backward, forward left, forward right, backward left, backward right)
                                    </li>
                                </ul>                               
                                <p>At the same time,
                                </p>
                                <ul>
                                    <li>The color sensor underneath the robot reads the color on the ground and encodes it into six color channels <br>
                                        (Violet, Blue, Green, Yellow, Orange, Red)
                                        </li>
                                    <li>The six channels are decoded into one of these colors <br>
                                        (Violet, Blue, Green, Yellow, Orange, Red, Brown, Black, White)
                                    </li>
                                    <li>The corresponding frequency for the color is played out loud through a speaker
                                    </li>
                                </ul>


								<h2>Communication Protocols</h2>
                                <p>The microbit1/joystick and microbit2/robot communicate with each other via 802.15.4 radio protocol for wireless transmission and reception of control signals. This enables real-time transmission of joystick position and button state from the joystick module to the robot module.
                                    <br>
                                    The joystick, color sensor, and robot motors are communicated with via I2C (Inter-Integrated Circuit)
                                </p>
                                <h2>My Tasks</h2>
                                <li>Process joystick input for wireless transmission.
                                </li>
                                <li>Implement robot control based on joystick commands.
                                </li>
                                <br>
                                <h2>Handling Joystick Input
                                </h2>
                                <p>
                                    The joystick communicates with the nRF52833 via the I2C protocol as it is an external device. The communication is handled using the nRF TWI Manager library, which manages the I2C transactions. The joystick's position is read through its I2C interface, providing horizontal and vertical values.
                                    <br>
                                    <br>
                                    The x and y values are encoded inside the radio packets as two 16-bit integers, each split into two bytes: the most significant byte (MSB) and the least significant byte (LSB). These values are calculated relative to predefined center values (x_center and y_center) to represent the joystick's displacement from the neutral position. The MSB and LSB of the adjusted x and y values are stored sequentially in the packet's payload after a password string to prevent interfering signals from other microbits.
                                    <br>
                                    <u>Reference</u>: <a href="https://github.com/sparkfun/SparkFun_Qwiic_Joystick_Arduino_Library" target="_blank">SparkFun Qwiic Joystick Arduino Library</a>
                                </p>
                                
                                <h2>Controlling the Microbit Robot</h2>
                                <p>
                                    The radio receiver decodes the x and y values by extracting their most significant byte (MSB) and least significant byte (LSB) from specific positions in the received packet. It reconstructs the 16-bit integer values by combining the MSB and LSB into a signed 16-bit value using bitwise operations.
                                    <br>
                                    <br>
                                    The motors are controlled via the <a href="https://www.sparkfun.com/products/15713" target="_blank">SparkFun moto:bit - micro:bit Carrier Board</a> using I2C communication. The motor_drive function manages motor speed and direction by writing speed values to the controller's I2C registers, while helper functions like motor_forward and motor_reverse simplify directional control.
                                    <br>
                                    <u>Reference</u>: <a href="https://github.com/hsshss/motobit-micropython/blob/master/motobit.py" target="_blank">Motobit MicroPython Library</a>
                                </p>

							</section>

					</div>

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; An Nguyen</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>