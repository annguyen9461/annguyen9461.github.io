<!DOCTYPE html><html lang="en" class=""><head><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Self-Reconfigurable Quadruped From Scratch | An Nguyen</title><meta name="description" content="C++, Python, ROS2, YOLO, CAD"><link rel="stylesheet" href="/css/styles.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&family=DM+Serif+Display&display=swap"><link rel="canonical" href="http://localhost:4000/projects/quad/"> <!--<link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/favicon-16x16.png"><link rel="manifest" href="/images/favicons/manifest.json"><link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#212121"><link rel="shortcut icon" href="/favicon.ico"> --> <!--<meta name="msapplication-config" content="/images/favicons/browserconfig.xml"> --><meta name="theme-color" content="#212121"><meta property="og:type" content="website"/><meta property="og:url" content="http://localhost:4000/projects/quad/"/><meta property="og:title" content="Self-Reconfigurable Quadruped From Scratch"/><meta property="og:description" content="C++, Python, ROS2, YOLO, CAD"/><meta property="og:image" content="http://localhost:4000/projects/quad/"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="900"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content=""/><meta name="twitter:creator" content=""/><meta name="twitter:title" content="Self-Reconfigurable Quadruped From Scratch"/><meta name="twitter:description" content="C++, Python, ROS2, YOLO, CAD"/><meta name="twitter:image" content="http://localhost:4000/images/projects/quad/quad.gif"/></head><!-- MathJax for LaTeX math rendering --> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script></head><body class=""><div class="global-wrapper"> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebSite", "name": "An Nguyen", "alternateName": "An Nguyen", "url": "https://annguyen9461.github.io/" } { "@context": "http://schema.org", "@type": "Organization", "url": "https://annguyen9461.github.io/", "logo": "https://annguyen9461.github.io/an-logo.png" } </script><header class="main-header sticky-header" data-header><div class="header-content"> <a class="accessibility-skip" href="#maincontent">Skip to main content</a><div class="logo-nav-wrapper"><div class="logo-title-wrapper"><div class="logo"> <a href="/" class="site-title-text" aria-label="Homepage, An Nguyen"> An Nguyen </a></div></div><nav class="navigation" aria-label="main navigation"> <a href="javascript:void(0)" class="mobile-nav">Menu</a><div class="mobile-nav-wrapper"><ul class="mobile-dropdown" itemscope itemtype="http://schema.org/SiteNavigationElement"><li> <a class="current" itemprop="url" href="/"><span itemprop="name">Projects</span></a></li><li> <a itemprop="url" href="/about"><span itemprop="name">About</span></a></li></ul></div></nav></div></div></header><main class="main-content " id="maincontent"><div class="page-title-wrapper"><h1 class="page-title type-level-1">Self-Reconfigurable Quadruped From Scratch</h1></div><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1, "item": { "@id": "http://localhost:4000/projects/", "name": "Projects" } },{ "@type": "ListItem", "position": 2, "item": { "@id": "http://localhost:4000/projects/quad/", "name": "Self-Reconfigurable Quadruped From Scratch", "image": "http://localhost:4000/images/projects/quad/quad.gif" } }] } </script><div class="project-wrapper"><div class="project-info"><section class="project-intro paragraph-normal"><h2 id="overview">OVERVIEW</h2><p>For my winter project, I built a self-reconfigurable quadruped that can switch between walking and rolling modes. I also integrated ROS2 and YOLO for a computer vision task.</p></section><aside class="project-details"><div class="project-detail-wrapper"><div class="project-detail project-detail-6 project-detail-first"><h3 class="title-label">Technologies</h3><span class="keep-line-wrap">C++,</span> <span class="keep-line-wrap"> Python,</span> <span class="keep-line-wrap"> ROS2,</span> <span class="keep-line-wrap"> YOLO,</span> <span class="keep-line-wrap"> CAD</span></div><div class="project-detail project-detail-6"><h3 class="title-label">Year</h3><p>2025</p></div></div></aside></div><section><div class="layout layout-text"><section class="project-text"><div class="project-text-wrapper paragraph-normal"><h2 id="demo">DEMO</h2><video controls="" style="width: 100%; height: auto;"> <source src="/videos/quad-demo.mp4" type="video/mp4" /> Your browser does not support the video tag. </video></div></section></div><div class="layout layout-text"><section class="project-text"><div class="project-text-wrapper paragraph-normal"><h2 id="hardware">HARDWARE</h2><ul><li>Raspberry Pi 5</li><li>Intel RealSense Depth Camera D435i</li><li>DYNAMIXEL U2D2 Power Hub</li><li>DYNAMIXEL U2D2</li><li>DYNAMIXEL XC430-T240BB-T Motor (x 12)</li><li>Adafruit ISM330DHCX - 6 DoF IMU - Accelerometer and Gyroscope</li><li>3S Lipo Battery 5200mAh 50C 11.1V RC Batteries</li></ul></div></section></div><div class="layout layout-text"><section class="project-text"><div class="project-text-wrapper paragraph-normal"><h2 id="design">DESIGN</h2><p>The research paper <a href="https://www.researchgate.net/publication/309273470_Scorpio_A_biomimetic_reconfigurable_rolling-crawling_robot">Scorpio: A biomimetic reconfigurable rolling-crawling robot</a> inspired the design of my robot, which I fully modeled in OnShape.</p><p>I chose DYNAMIXEL motors for their high torque output and well-documented ROS2 integration. For the microcontroller, I used the Raspberry Pi 5, which supports Ubuntu and runs ROS2 efficiently.</p></div></section></div><div class="layout layout-2col"><figure class="image-wrapper "> <img class="" src="/images/projects/quad/quad-urdf.gif" alt="URDF of robot"><figcaption>CAD Design</figcaption></figure><figure class="image-wrapper "> <img class="" src="/images/projects/quad/quad_view.png" alt="Top View"><figcaption>Top View</figcaption></figure></div><div class="layout layout-2col"><figure class="image-wrapper "> <img class="" src="/images/projects/quad/quad_rolling.png" alt="Rolling Mode"><figcaption>Rolling Mode</figcaption></figure><figure class="image-wrapper "> <img class="" src="/images/projects/quad/quad_walking.png" alt="Walking Mode"><figcaption>Walking Mode</figcaption></figure></div><div class="layout layout-text"><section class="project-text"><div class="project-text-wrapper paragraph-normal"><h2 id="walking-gaits">WALKING GAITS</h2><h3 id="trot-gait">TROT GAIT</h3><p><strong>Pattern:</strong> Diagonal pairs move together<br /> <strong>Stability:</strong> 2 legs on ground at all times<br /> <strong>Speed:</strong> Moderate speed with good efficiency</p><p><strong>Footfall sequence:</strong></p><ul><li>Phase 1: Front-left (Leg 1) + Rear-right (Leg 4)</li><li>Phase 2: Front-right (Leg 2) + Rear-left (Leg 3)</li></ul><p>Each cycle consists of 8 steps:</p><ol><li><strong>Lift diagonal pair</strong> — roll joints increase by ~22° (converted to ≈ 250–310 ticks).</li><li><strong>Swing forward</strong> — yaw joints rotate:<ul><li>Leg 1, 3: +25° CCW (~280 ticks)</li><li>Leg 2, 4: +10° CW (~110 ticks)</li></ul></li><li><strong>Place down</strong> — roll joints return to baseline.</li><li><strong>Return to home</strong> — robot rebalances before the next pair moves.</li></ol><p><strong>Timing values</strong> (empirically tuned for smooth motion):</p><ul><li>Lift: 150 ms</li><li>Swing: 200 ms</li><li>Lower: 150 ms</li><li>Support phase: 100 ms</li></ul><p>The <strong>home pose</strong> acts as a restabilization point between diagonal strides, ensuring symmetric recovery before the next pair activates.</p><h3 id="crawl-gait">CRAWL GAIT</h3><p><strong>Pattern:</strong> Move one leg at a time (wave pattern)<br /> <strong>Stability:</strong> Always 3 legs on ground<br /> <strong>Speed:</strong> Slow but very stable</p><p><strong>Sequence:</strong><br /> Leg 4 → Leg 1 → Leg 3 → Leg 2</p><p>Each leg executes:</p><ol><li><strong>Lift</strong>: +22° (≈ 250 ticks) on roll joint</li><li><strong>Swing forward</strong>: +10–25° yaw offset (110–280 ticks)</li><li><strong>Lower</strong>: returns to home pose</li><li><strong>Body pause</strong>: robot rests on all four legs to ensure stability</li></ol><p><strong>Timing values</strong> (slower to preserve balance):</p><ul><li>Lift: 200 ms</li><li>Swing: 250 ms</li><li>Lower: 200 ms</li><li>Support: 200 ms</li></ul><p>This results in ~3.2 seconds per full gait cycle (4 legs × ~800 ms), compared to ~1.2 seconds for a full trot cycle — a 2.5× speed difference.</p><h3 id="technical-implementation">TECHNICAL IMPLEMENTATION</h3><ul><li>Gait control uses precomputed <strong>motor position arrays</strong> generated by <code class="language-plaintext highlighter-rouge">generate_movement_arrays_walk_fw()</code>.</li><li>Motion transitions are smoothed using <code class="language-plaintext highlighter-rouge">gradual_transition()</code> over ~17 steps.</li><li><p>Motor angle deltas are computed from degrees → ticks using:</p>\[\text{TICKS} = \left(\frac{\theta}{360^\circ}\right) \cdot 4096\]</li></ul><p>Each gait operates in a real-time control loop that dynamically updates motor positions.</p></div></section></div><div class="layout layout-text"><section class="project-text"><div class="project-text-wrapper paragraph-normal"><h2 id="processing-imu-data-for-rolling">PROCESSING IMU DATA FOR ROLLING</h2><p>To determine how to propel the quadruped robot in rolling mode, I process accelerometer and gyroscope data from the ISM330DHCX sensor via I²C on a Raspberry Pi 5.</p><p>The key goal is to compute the <strong>tilt angle</strong> of the robot using acceleration in the Y and Z axes:</p>\[\theta = \arctan\left(\frac{a_y}{a_z}\right)\]<p>where:</p><ul><li>\( a_y \) : linear acceleration along the Y-axis</li><li>\( a_z \) : linear acceleration along the Z-axis</li></ul><p>This angle is converted from radians to degrees to determine the robot’s current orientation and decide which side (blue or yellow) is on the ground:</p>\[\theta_{\text{deg}} = \theta \cdot \left( \frac{180}{\pi} \right)\]<p>After averaging a short window of tilt measurements, the robot checks if the orientation falls within certain thresholds:</p><p><strong>BLUE side under</strong> if:</p>\[\theta_{\text{deg}} \in [-179^\circ, -162^\circ] \cup [167^\circ, 179^\circ]\]<p><strong>YELLOW side under</strong> if:</p>\[\theta_{\text{deg}} \in [0^\circ, 15^\circ] \cup [-23^\circ, 0^\circ]\]<p>Depending on the orientation, the system issues a movement command like to roll forward with YELLOW side propulsion or roll forward with BLUE side propulsion.</p><p>The system runs in real time and adjusts its propulsion mode dynamically based on IMU feedback.</p></div></section></div><div class="layout layout-text"><section class="project-text"><div class="project-text-wrapper paragraph-normal"><h2 id="computer-vision">COMPUTER VISION</h2><p>I used YOLOv11 from Ultralytics, trained with a <a href="https://universe.roboflow.com/lsc-kik8c/bowling-pin-detection">bowling pin dataset</a> to improve robustness. Since the model does not perform as well on blue bowling pins, I added a second red bowling pin to help the robot correctly transform when it is facing the center between the pins.</p><p><strong>AUTONOMOUS BOWLING SEQUENCE</strong></p><ul><li>The robot begins turning while simultaneously scanning for bowling pins.</li><li>There is a 7-second pause between turns.</li><li>If the robot detects at least two pins continuously for 3 seconds, it transitions to rolling mode.</li><li>Once in rolling mode, it reads IMU data to determine tilt angles around the X-axis before rolling forward.</li></ul></div></section></div><div class="layout layout-1col"><figure class="image-wrapper "> <img class="" src="/images/projects/quad/quad-cv-demo.gif" alt="quad cv demo"><figcaption>Using YOLO to Detect and Count Bowling Pins</figcaption></figure></div><div class="layout layout-text"><section class="project-text"><div class="project-text-wrapper paragraph-normal"><h2 id="nodes">NODES</h2><p>The bowling task is divided into several subsystems:</p><p><strong>Control (Action Server and Client Nodes)</strong><br /> These nodes update the robot’s state (<code class="language-plaintext highlighter-rouge">TURNING</code>, <code class="language-plaintext highlighter-rouge">STOPPING</code>, <code class="language-plaintext highlighter-rouge">TRANSFORM TO ROLLING</code>, <code class="language-plaintext highlighter-rouge">ROLLING</code>, etc.) based on the number of detected bowling pins and publish the corresponding robot configuration for the Motor Control Node to set the DXL motors.</p><p><strong>Computer Vision (YOLO Node)</strong><br /> This node processes data from the camera and counts the number of bowling pins, publishing the result to a topic.</p><p><strong>Dynamixel Motor Control (Quad Motor Control Node)</strong><br /> This node controls the motors based on the robot’s state and processes IMU data to determine tilt angles during ROLLING mode.</p></div></section></div><div class="layout layout-1col"><figure class="image-wrapper "> <img class="" src="/images/projects/quad/quad-diagram.png" alt="quad block diagram"><figcaption>Block Diagram of the Interactions Between Subsystems</figcaption></figure></div></section><section class="additional-content-wrapper"><div class="additional-content"></div></section></div></main><footer class="main-footer" id="footer"><div class="footer-license-wrapper"> <small>&copy; 2025 An Nguyen</small></div><!--<div class="made-by-wrapper"> <a class="made-by" href="https://github.com/annguyen9461">My Github</a></div>--></footer><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <script type="text/javascript"> $(document).ready(function() { $('.mobile-nav').on('click', function(){ $('.navigation').toggleClass('show'); $('.mobile-nav').html(function(i, label){ return label === 'Menu' ? '&times; Close' : 'Menu' }); $("body").toggleClass("prevent-scroll-mobile"); $("header.main-header").toggleClass("header-prevent-hide"); }); }); !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Headspace=t()}(this,function(){"use strict";function e(s){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof e))return new(Function.prototype.bind.apply(e,[null].concat(Array.prototype.slice.call(arguments))));this.element=s,this.startOffset=t(n.startOffset,s&&s.offsetHeight),this.tolerance=t(n.tolerance,8),this.showAtBottom=t(n.showAtBottom,!0),this.classNames=n.classNames||{base:"headspace",fixed:"headspace--fixed",hidden:"headspace--hidden"},this._scrollLast=0,"undefined"!=typeof window&&this.init()}function t(e,t){return void 0!==e?e:t}function s(e){var t=window.pageYOffset,s=e._scrollLast;t<=0?e.reset():e.showAtBottom&&window.innerHeight+t>=document.body.offsetHeight?e.fix():t>e.startOffset&&Math.abs(t-s)>=e.tolerance&&e[t>s?"hide":"fix"](),e._scrollLast=t}return e.prototype={init:function(){var e=this;this.addClass(this.classNames.base),window.addEventListener("scroll",function(){return e.debounce(function(){return s(e)})})},reset:function(){var e=this.classNames;this.removeClass(e.fixed,e.hidden)},fix:function(){var e=this.classNames;this.addClass(e.fixed),this.removeClass(e.hidden)},hide:function(){this.addClass(this.classNames.hidden)},addClass:function(){var e;(e=this.element.classList).add.apply(e,arguments)},removeClass:function(){var e;(e=this.element.classList).remove.apply(e,arguments)},debounce:function(e){window.requestAnimationFrame(e)}},e.isSupported=function(){return!!("undefined"!=typeof window&&window.requestAnimationFrame&&"classList"in document.documentElement)},e}); $(function () { Headspace(document.querySelector('[data-header]'), { startOffset: 90, tolerance: 5, showAtBottom: false, classNames: { base: 'sticky-header', fixed: 'sticky-header--fixed', hidden: 'sticky-header--hidden' } }) }()); </script></div></body></html>
